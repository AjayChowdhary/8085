0001   0000             	
0002   0000             .ORG 0000H
0003   0000 C3 3E 00    	JMP MAIN
0004   0003             
0005   0003             .ORG 0034H
0006   0034 C3 49 02    	JMP RST65
0007   0037             
0008   0037 06 FF       DELAY: 	MVI B,0FFH; SUBROUTINE FOR SHORT DELAY of 1"point"8ms
0009   0039 05          LOOP:	DCR B
0010   003A C2 39 00    		JNZ LOOP
0011   003D C9          		RET	
0012   003E             
0013   003E             
0014   003E             MAIN:	
0015   003E F3          		DI
0016   003F 31 00 00    		LXI SP,0000H; INITIALIZING THE STACK POINTER
0017   0042 F5          		PUSH PSW;SAVING ACCUMALATOR CONTENTS TO FFFFH
0018   0043             		
0019   0043 3E 92       		MVI A,092H; CONTROL WORD FOR 8255 - P A&B=IP P C=OP
0020   0045 D3 03       		OUT 03H; CONTROL REGISTER ADDRESS =03H
0021   0047             		
0022   0047 3E C9       		MVI A,0C9H; CONTROL WORD FOR 1 O/P ON SOD & MASKING ALL INTERRUPTS OTHER THAN 6.5
0023   0049 30          		SIM
0024   004A CD 62 00    		CALL LCD_INIT
0025   004D CD 37 00    		CALL DELAY
0026   0050 CD 8C 00    		CALL DATA1
0027   0053 CD 75 01    		CALL DELAY1
0028   0056 CD 75 01    		CALL DELAY1
0029   0059 CD 75 01    		CALL DELAY1
0030   005C FB          		EI
0031   005D C3 5E 02    		JMP HEART
0032   0060             
0033   0060             
0034   0060 F1          		POP PSW
0035   0061 76          		HLT
0036   0062             
0037   0062             
0038   0062 16 33       LCD_INIT: MVI D, 033H; SENDING INITIALISATION COMMAND
0039   0064 CD 03 01    		CALL COMMAND
0040   0067 16 32       		MVI D,032H; SENDING INITIALISATION COMMAND
0041   0069 CD 03 01    		CALL COMMAND
0042   006C 16 28       		MVI D,028H; SENDING COMMAND TO INITIALIZE 4 BIT
0043   006E CD 03 01    		CALL COMMAND
0044   0071 16 06       		MVI D,006H; SENDING COMMAND TO INITIALIZE CURSOR
0045   0073 CD 03 01    		CALL COMMAND
0046   0076 16 0F       		MVI D,00FH; SEND COMMAND TO DISPLAY ON CURSOR BLINK
0047   0078 CD 03 01    		CALL COMMAND
0048   007B 16 01       		MVI D,001H; SENDING COMMAND TO CLEAR DISPLAY
0049   007D CD 03 01    		CALL COMMAND
0050   0080 16 80       		MVI D,080H; COMMAND TO FORCE CURSOR FROM 1st LINE
0051   0082 CD 03 01    		CALL COMMAND
0052   0085 CD 37 00    		CALL DELAY
0053   0088 CD 37 00    		CALL DELAY
0054   008B             
0055   008B C9          		RET
0056   008C             
0057   008C 16 20       DATA1: MVI D,020H; SENDING DATA "SPACE"
0058   008E CD 3A 01    		CALL DATA
0059   0091 16 20       		MVI D,020H; SENDING DATA "SPACE"
0060   0093 CD 3A 01    		CALL DATA
0061   0096 16 20       		MVI D,020H; SENDING DATA "SPACE"
0062   0098 CD 3A 01    		CALL DATA	
0063   009B 16 48       		MVI D,048H; SENDING DATA "H"
0064   009D CD 3A 01    		CALL DATA
0065   00A0 16 65       		MVI D,065H; SENDING DATA "e"
0066   00A2 CD 3A 01    		CALL DATA
0067   00A5 16 61       		MVI D,061H; SENDING DATA "a"
0068   00A7 CD 3A 01    		CALL DATA
0069   00AA 16 6C       		MVI D,06CH; SENDING DATA "l"
0070   00AC CD 3A 01    		CALL DATA
0071   00AF 16 74       		MVI D,074H; SENDING DATA "t"
0072   00B1 CD 3A 01    		CALL DATA
0073   00B4 16 68       		MVI D,068H; SENDING DATA "h"
0074   00B6 CD 3A 01    		CALL DATA
0075   00B9 16 20       		MVI D,020H; SENDING DATA "SPACE"
0076   00BB CD 3A 01    		CALL DATA
0077   00BE 16 4B       		MVI D,04BH; SENDING DATA "K"
0078   00C0 CD 3A 01    		CALL DATA
0079   00C3 16 69       		MVI D,069H; SENDING DATA "i"
0080   00C5 CD 3A 01    		CALL DATA
0081   00C8 16 74       		MVI D,074H; SENDING DATA "t"
0082   00CA CD 3A 01    		CALL DATA
0083   00CD 16 C0       		MVI D,0C0H; COMMAND TO FORCE CURSOR FROM 2nd LINE
0084   00CF CD 03 01    		CALL COMMAND
0085   00D2 16 20       		MVI D,020H; SENDING DATA "SPACE"
0086   00D4 CD 3A 01    		CALL DATA
0087   00D7 16 20       		MVI D,020H; SENDING DATA "SPACE"
0088   00D9 CD 3A 01    		CALL DATA
0089   00DC 16 20       		MVI D,020H; SENDING DATA "SPACE"
0090   00DE CD 3A 01    		CALL DATA
0091   00E1 16 20       		MVI D,020H; SENDING DATA "SPACE"
0092   00E3 CD 3A 01    		CALL DATA
0093   00E6 16 20       		MVI D,020H; SENDING DATA "SPACE"
0094   00E8 CD 3A 01    		CALL DATA
0095   00EB 16 20       		MVI D,020H; SENDING DATA "SPACE"
0096   00ED CD 3A 01    		CALL DATA
0097   00F0 16 20       		MVI D,020H; SENDING DATA "SPACE"
0098   00F2 CD 3A 01    		CALL DATA
0099   00F5 16 42       		MVI D,042H; SENDING DATA "B"
0100   00F7 CD 3A 01    		CALL DATA
0101   00FA 16 79       		MVI D,079H; SENDING DATA "y"
0102   00FC CD 3A 01    		CALL DATA
0103   00FF CD 37 00    		CALL DELAY
0104   0102 C9          		RET
0105   0103             
0106   0103 7A          COMMAND: MOV A,D
0107   0104 E6 F0       		ANI 0F0H;MASKING UPPER 4 BITS AND RS=0 FOR COMMAND
0108   0106 D3 02       		OUT 02H; PORT C ADDRESS OF 8255
0109   0108 CD 37 00    		CALL DELAY
0110   010B F6 02       		ORI 02H; ENABLE HIGH AND RS LOW
0111   010D CD 37 00    		CALL DELAY
0112   0110 D3 02       		OUT 02H
0113   0112 CD 37 00    		CALL DELAY
0114   0115 E6 F0       		ANI 0F0H
0115   0117 D3 02       		OUT 02H
0116   0119 CD 37 00    		CALL DELAY
0117   011C 7A          		MOV A,D
0118   011D 07          		RLC; SHIFTING THE 4 BITS
0119   011E 07          		RLC
0120   011F 07          		RLC
0121   0120 07          		RLC
0122   0121 E6 F0       		ANI 0F0H; MASKING LOWER 4 BITS
0123   0123 D3 02       		OUT 02H
0124   0125 CD 37 00    		CALL DELAY
0125   0128 F6 02       		ORI 02H; ENABLE HIGH
0126   012A CD 37 00    		CALL DELAY
0127   012D D3 02       		OUT 02H
0128   012F CD 37 00    		CALL DELAY
0129   0132 E6 F0       		ANI 0F0H
0130   0134 D3 02       		OUT 02H
0131   0136 CD 37 00    		CALL DELAY
0132   0139 C9          		RET
0133   013A             
0134   013A             
0135   013A F5          DATA: PUSH PSW
0136   013B D5          		PUSH D 	
0137   013C 7A          		MOV A,D
0138   013D E6 F1       		ANI 0F1H; MAKING RS=1 FOR DATA REGISTER
0139   013F D3 02       		OUT 02H; PORT C ADDRESS OF 8255
0140   0141 CD 37 00    		CALL DELAY
0141   0144 F6 03       		ORI 03H; ENABLE HIGH AND RS HIGH
0142   0146 CD 37 00    		CALL DELAY
0143   0149 D3 02       		OUT 02H
0144   014B CD 37 00    		CALL DELAY
0145   014E E6 F1       		ANI 0F1H
0146   0150 D3 02       		OUT 02H
0147   0152 CD 37 00    		CALL DELAY
0148   0155 7A          		MOV A,D
0149   0156 07          		RLC; SHIFTING THE 4 BITS
0150   0157 07          		RLC
0151   0158 07          		RLC
0152   0159 07          		RLC
0153   015A E6 F1       		ANI 0F1H
0154   015C D3 02       		OUT 02H
0155   015E CD 37 00    		CALL DELAY
0156   0161 F6 03       		ORI 03H; ENABLE HIGH
0157   0163 CD 37 00    		CALL DELAY
0158   0166 D3 02       		OUT 02H
0159   0168 CD 37 00    		CALL DELAY
0160   016B E6 F1       		ANI 0F1H
0161   016D D3 02       		OUT 02H
0162   016F CD 37 00    		CALL DELAY
0163   0172 D1          		POP D
0164   0173 F1          		POP PSW
0165   0174 C9          		RET
0166   0175             
0167   0175             
0168   0175 21 FF FF    DELAY1:	LXI H, 0FFFFH
0169   0178 2B          LOOP1:	DCX H
0170   0179 7D          		MOV A,L
0171   017A B4          		ORA H
0172   017B C2 78 01    		JNZ LOOP1 
0173   017E C9          		RET
0174   017F             
0175   017F             
0176   017F             
0177   017F F5          HEXTOBCD: PUSH PSW
0178   0180 D5          			PUSH D
0179   0181 4F          			MOV C,A              ; GET HEX DATA
0180   0182 16 00       	         MVI D,00H          ;Clear D for Most significant Byte 
0181   0184 AF          	         XRA A             ;Clear Accumulator 
0182   0185             
0183   0185 C6 01       LOOP22:   ADI 01              ;Count the number one by one 
0184   0187 27          	         DAA               ;Adjust for BCD count 
0185   0188 D2 8C 01    	         JNC LOOP21 
0186   018B 14          	         INR D 
0187   018C 0D          LOOP21:   DCR C 
0188   018D C2 85 01    	         JNZ LOOP22 
0189   0190 32 01 A0    	         STA 0A001H          ;Store the Least Significant Byte 
0190   0193 7A          	         MOV A,D 
0191   0194 32 05 A0    	         STA 0A005H          ;Store the Most Significant Byte 
0192   0197 D1          	         POP D
0193   0198 F1          	         POP PSW
0194   0199 C9          	         RET
0195   019A             
0196   019A 47          BCDTOASCII:   MOV B,A   ; Address already stored in HL
0197   019B E6 0F       				ANI 0FH           ;Mask Upper Nibble 
0198   019D CD AD 01    				CALL SUB1        ;Get ASCII code for upper nibble 
0199   01A0 57          				MOV D,A 
0200   01A1 78          				MOV A,B 
0201   01A2 E6 F0       				ANI 0F0H           ;Mask Lower Nibble 
0202   01A4 07          				RLC 
0203   01A5 07          				RLC 
0204   01A6 07          				RLC 
0205   01A7 07          				RLC 
0206   01A8 CD AD 01    				CALL SUB1        ;Get ASCII code for lower nibble 
0207   01AB 4F          				MOV C,A
0208   01AC C9          				RET              ;Return from subroutine
0209   01AD             
0210   01AD FE 0A       SUB1:   CPI 0AH
0211   01AF DA B4 01    	        JC SKIP 
0212   01B2 C6 07       	        ADI 07 
0213   01B4 C6 30       SKIP:   ADI 30H
0214   01B6 C9          	        RET              ;Return Subroutine
0215   01B7             
0216   01B7             
0217   01B7             
0218   01B7             DATA3: 
0219   01B7 CD 7F 01    		CALL HEXTOBCD; LSB-A001H, MSB-A005H
0220   01BA 3A 01 A0    			LDA 0A001H; LOAD HL WITH ADDRESS OF LSB OF HEART RATE
0221   01BD CD 9A 01    			CALL BCDTOASCII ; LSB - C, MSB - D
0222   01C0 79          			MOV A,C
0223   01C1 32 02 A0    			STA 0A002H; STORING MSB 
0224   01C4 7A          			MOV A,D
0225   01C5 32 03 A0    			STA 0A003H ; STORING LSB
0226   01C8             
0227   01C8 3A 05 A0    			LDA 0A005H ; LOAD A WITH ADDRESS OF MSB OF HEART RATE
0228   01CB CD 9A 01    			CALL BCDTOASCII ; LSB - C, MSB - D
0229   01CE 79          			MOV A,C
0230   01CF 32 06 A0    			STA 0A006H ; STORING MSB - THIS WILL ALWAYS BE 0 
0231   01D2 7A          			MOV A,D
0232   01D3 32 07 A0    			STA 0A007H ; STORING LSB
0233   01D6             
0234   01D6 16 01       			MVI D,001H; SENDING COMMAND TO CLEAR DISPLAY
0235   01D8 CD 03 01    			CALL COMMAND
0236   01DB 16 80       			MVI D,080H; COMMAND TO FORCE CURSOR FROM 1st LINE
0237   01DD CD 03 01    			CALL COMMAND
0238   01E0 CD 37 00    			CALL DELAY
0239   01E3 CD 37 00    			CALL DELAY
0240   01E6             
0241   01E6 16 48       			MVI D,048H; SENDING DATA "H"
0242   01E8 CD 3A 01    			CALL DATA
0243   01EB 16 65       			MVI D,065H; SENDING DATA "e"
0244   01ED CD 3A 01    			CALL DATA
0245   01F0 16 61       			MVI D,061H; SENDING DATA "a"
0246   01F2 CD 3A 01    			CALL DATA
0247   01F5 16 72       			MVI D,072H; SENDING DATA "r"
0248   01F7 CD 3A 01    			CALL DATA
0249   01FA 16 74       			MVI D,074H; SENDING DATA "t"
0250   01FC CD 3A 01    			CALL DATA
0251   01FF 16 20       			MVI D,020H; SENDING DATA "SPACE"
0252   0201 CD 3A 01    			CALL DATA
0253   0204 16 52       			MVI D,052H; SENDING DATA "R"
0254   0206 CD 3A 01    			CALL DATA
0255   0209 16 61       			MVI D,061H; SENDING DATA "a"
0256   020B CD 3A 01    			CALL DATA
0257   020E 16 74       			MVI D,074H; SENDING DATA "t"
0258   0210 CD 3A 01    			CALL DATA
0259   0213 16 65       			MVI D,065H; SENDING DATA "e"
0260   0215 CD 3A 01    			CALL DATA
0261   0218 16 3E       			MVI D,03EH; SENDING DATA "colon"
0262   021A             
0263   021A 16 C0       			MVI D,0C0H; COMMAND TO FORCE CURSOR FROM 2nd LINE
0264   021C CD 03 01    			CALL COMMAND
0265   021F             
0266   021F 3A 07 A0    			LDA 0A007H ; LSB OF MSB OF HEART RATE (MSB IS ALWAYS 0)
0267   0222 57          			MOV D,A
0268   0223 CD 3A 01    			CALL DATA
0269   0226 3A 02 A0    			LDA 0A002H ; MSB OF LSB OF HEART RATE
0270   0229 57          			MOV D,A
0271   022A CD 3A 01    			CALL DATA
0272   022D 3A 03 A0    			LDA 0A003H ; LSB OF LSB OF HEART RATE
0273   0230 57          			MOV D,A
0274   0231 CD 3A 01    			CALL DATA
0275   0234             
0276   0234 16 20       			MVI D,020H; SENDING DATA "SPACE"
0277   0236 CD 3A 01    			CALL DATA
0278   0239 16 42       			MVI D,042H; SENDING DATA "B"
0279   023B CD 3A 01    			CALL DATA
0280   023E 16 50       			MVI D,050H; SENDING DATA "P"
0281   0240 CD 3A 01    			CALL DATA
0282   0243 16 4D       			MVI D,04DH; SENDING DATA "M"
0283   0245 CD 3A 01    			CALL DATA
0284   0248 C9          			RET
0285   0249             
0286   0249 F5          RST65: PUSH PSW
0287   024A F3          			DI
0288   024B 3E 40       		   MVI A, 040H
0289   024D 30          		   SIM;  OUTPUTTING 0 ON SOD TO CLEAR D F/F
0290   024E CD 37 00    		   CALL DELAY
0291   0251             
0292   0251 3A 00 A0    		   LDA 0A000H
0293   0254 3C          		   INR A
0294   0255 32 00 A0    		   STA 0A000H
0295   0258             		   
0296   0258 FB          		   EI
0297   0259 3E CD       		   MVI A,0CDH
0298   025B 30          		   SIM
0299   025C F1          		   POP PSW
0300   025D             
0301   025D C9          		   RET
0302   025E             
0303   025E 3E 00       HEART: 	MVI A,00H
0304   0260 32 00 A0    			STA 0A000H
0305   0263 16 0F       			MVI D,00FH
0306   0265 CD 8B 02    			CALL DELAYPSEC
0307   0268 CD D4 02    			CALL DATA4
0308   026B 16 0F       			MVI D,00FH
0309   026D CD AC 02    			CALL DELAYNSEC
0310   0270             
0311   0270 CD 37 00    			CALL DELAY
0312   0273 CD 37 00    			CALL DELAY
0313   0276 F3          			DI
0314   0277 3A 00 A0    			LDA 0A000H
0315   027A 07          			RLC
0316   027B 32 00 A0    			STA 0A000H
0317   027E CD B7 01    			CALL DATA3;
0318   0281 CD 37 00    			CALL DELAY
0319   0284 CD 37 00    			CALL DELAY
0320   0287 FB          			EI
0321   0288             
0322   0288 C3 5E 02    		JMP HEART
0323   028B             
0324   028B C5          DELAYPSEC: PUSH B
0325   028C D5          				PUSH D  
0326   028D F5          				PUSH PSW
0327   028E 7A          				MOV A,D;   SUBROUTINE FOR DELAY OF 1sec
0328   028F 06 96       LOOP63: MVI B, 096H
0329   0291 0E FA       LOOP64: MVI C, 0FAH
0330   0293 65          LOOP65: MOV H,L
0331   0294 65          				MOV H,L
0332   0295 65          				MOV H,L
0333   0296 65          				MOV H,L
0334   0297 65          				MOV H,L
0335   0298 65          				MOV H,L
0336   0299 65          				MOV H,L
0337   029A 65          				MOV H,L
0338   029B 65          				MOV H,L
0339   029C 0D          				DCR C
0340   029D C2 93 02    				JNZ LOOP65
0341   02A0 05          				DCR B
0342   02A1 C2 91 02    				JNZ LOOP64
0343   02A4 3D          				DCR A
0344   02A5 C2 8F 02    				JNZ LOOP63
0345   02A8 F1          				POP PSW
0346   02A9 D1          				POP D
0347   02AA C1          				POP B
0348   02AB C9          				RET
0349   02AC             
0350   02AC             
0351   02AC C5          DELAYNSEC: PUSH B
0352   02AD D5          				PUSH D  
0353   02AE F5          				PUSH PSW
0354   02AF 7A          				MOV A,D  ;SUBROUTINE FOR DELAY OF 1sec
0355   02B0 06 96       LOOP3: MVI B,096H
0356   02B2 0E FA       LOOP4: MVI C,0FAH
0357   02B4 65          LOOP5: MOV H,L
0358   02B5 65          				MOV H,L
0359   02B6 65          				MOV H,L
0360   02B7 65          				MOV H,L
0361   02B8 65          				MOV H,L
0362   02B9 65          				MOV H,L
0363   02BA 65          				MOV H,L
0364   02BB 65          				MOV H,L
0365   02BC 65          				MOV H,L
0366   02BD 0D          				DCR C
0367   02BE C2 B4 02    				JNZ LOOP5
0368   02C1 05          				DCR B
0369   02C2 C2 B2 02    				JNZ LOOP4
0370   02C5 5F          				MOV E,A
0371   02C6 16 2A       				MVI D,02AH; SENDING DATA "*"
0372   02C8 CD 3A 01    			    	CALL DATA
0373   02CB 7B          			    	MOV A,E
0374   02CC 3D          				DCR A
0375   02CD C2 B0 02    				JNZ LOOP3
0376   02D0 F1          				POP PSW
0377   02D1 D1          				POP D
0378   02D2 C1          				POP B
0379   02D3 C9          				RET
0380   02D4             
0381   02D4             
0382   02D4 16 01       DATA4:		MVI D,001H  ; SENDING COMMAND TO CLEAR DISPLAY
0383   02D6 CD 03 01    				CALL COMMAND
0384   02D9 16 80       				MVI D,080H; COMMAND TO FORCE CURSOR FROM 1st LINE
0385   02DB CD 03 01    				CALL COMMAND
0386   02DE CD 37 00    				CALL DELAY
0387   02E1 CD 37 00    				CALL DELAY
0388   02E4             
0389   02E4 16 43       				MVI D,043H; SENDING DATA "C"
0390   02E6 CD 3A 01    				CALL DATA
0391   02E9 16 61       				MVI D,061H; SENDING DATA "a"
0392   02EB CD 3A 01    				CALL DATA
0393   02EE 16 6C       				MVI D,06CH; SENDING DATA "l"
0394   02F0 CD 3A 01    				CALL DATA
0395   02F3 16 63       				MVI D,063H; SENDING DATA "c"
0396   02F5 CD 3A 01    				CALL DATA
0397   02F8 16 75       				MVI D,075H; SENDING DATA "u"
0398   02FA CD 3A 01    				CALL DATA
0399   02FD 16 6C       				MVI D,06CH; SENDING DATA "l"
0400   02FF CD 3A 01    				CALL DATA
0401   0302 16 61       				MVI D,061H; SENDING DATA "a"
0402   0304 CD 3A 01    				CALL DATA
0403   0307 16 74       				MVI D,074H; SENDING DATA "t"
0404   0309 CD 3A 01    				CALL DATA
0405   030C 16 69       				MVI D,069H; SENDING DATA "i"
0406   030E CD 3A 01    				CALL DATA
0407   0311 16 6E       				MVI D,06EH; SENDING DATA "n"
0408   0313 CD 3A 01    				CALL DATA
0409   0316 16 67       				MVI D,067H; SENDING DATA "g"
0410   0318 CD 3A 01    				CALL DATA
0411   031B 16 2E       				MVI D,02EH; SENDING DATA "."
0412   031D CD 3A 01    				CALL DATA
0413   0320 16 2E       				MVI D,02EH; SENDING DATA "."
0414   0322 CD 3A 01    				CALL DATA
0415   0325 16 2E       				MVI D,02EH; SENDING DATA "."
0416   0327 CD 3A 01    				CALL DATA
0417   032A             
0418   032A 16 C0       				MVI D,0C0H; COMMAND TO FORCE CURSOR FROM 2nd LINE
0419   032C CD 03 01    				CALL COMMAND
0420   032F             
0421   032F C9          				RET
0422   0330             								
Number of errors = 0
